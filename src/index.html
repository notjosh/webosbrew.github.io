<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>webOS Homebrew Project</title>
</head>
<body data-bs-theme="dark">
<nav class="navbar navbar-expand-md bg-dark sticky-top border-bottom">
  <div class="container">
    <a class="navbar-brand d-md-none" href="#">
      <img class="bi" width="32" height="32" src="img/icon32.svg" alt="webOS Homebrew">
      webOS Homebrew
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvas"
            aria-controls="offcanvas" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas" aria-labelledby="offcanvasLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasLabel">webOS Homebrew</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav flex-grow-1 justify-content-start">
          <li class="nav-item"><a class="nav-link" href="#">
            <img class="bi" width="32" height="32" src="img/icon32.svg" alt="webOS Homebrew">
          </a></li>
          <li class="nav-item"><a class="nav-link" href="#">Apps</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Develop</a></li>
          <li class="nav-item"><a class="nav-link" href="#">About</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<main class="landing">
  <div class="headline px-2 py-4 d-flex flex-column align-items-center">
    <div class="tv-container">
      <img class="tv-amblight z-n1" id="amblight-canvas">
      <div class="tv-screen">
        <div class="img-container">
          <img class="tv-graphics" src="img/hbchannel.png">
        </div>
      </div>
    </div>
    <div class="mt-4 text-end">
      <h2 class="headline-title fw-light text-nowrap">
        <span class="feature" data-graphics="img/kodi-recently-added.jpg">Kodi</span>
        <span class="feature" data-graphics="img/moonlight.png">Moonlight</span>
        <span class="feature amblight" data-graphics="img/borealias.webp">Ambient light</span>
        <span class="feature active" data-graphics="img/hbchannel.png">More apps</span>
        for <span class="webos web">web</span><span class="webos os">OS</span> TV
      </h2>
    </div>
  </div>
  <hr>
  <h2>Homebrew on webOS TV</h2>
  <p>
    webOS Homebrew is a community-driven project that gives you more potential on your webOS TV.
    You can install custom apps and games that's not officially available on the LG Content Store.
  </p>
  <div>
    TODO: a gallery of apps
  </div>
  <hr>
  <h2>Get Started</h2>
  <div class="row">
    <div class="col-12 col-md-6">
      <div class="card card-body bg-body-tertiary">
        <h5 class="card-title">Root your TV</h5>
        <p class="card-text">
          Jailbreak your TV and install Homebrew Channel.
          <br>
          Gain more control over your TV.
        </p>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card card-body bg-body-tertiary">
        <h5 class="card-title">Install via Dev Mode</h5>
        <p class="card-text">
          Install apps and games via Developer Mode.
          <br>
          No root required.
        </p>
      </div>
    </div>
  </div>
  <hr>
  <h2>Contribute</h2>
  <hr>
</main>
<%= require('html-loader!./partials/footer.html').default %>
<script>
  const headlineFeatures = document.querySelectorAll('.headline-title .feature');
  const tvScreen = document.querySelector('.tv-screen');
  const tvAmblight = document.querySelector('.tv-amblight');
  const tvGraphics = document.querySelector('.tv-graphics');
  let startIndex = Math.floor(Math.random() * headlineFeatures.length);

  function populateHeadline() {
    for (let i = 0; i < headlineFeatures.length; i++) {
      /** @type {HTMLElement} */
      const featureElem = headlineFeatures[i];
      const active = i === startIndex;
      featureElem.classList.toggle('active', active);
      if (active) {
        let isAmblight = featureElem.classList.contains('amblight');
        tvScreen.classList.toggle('amblight', isAmblight);
        tvAmblight.classList.toggle('visually-hidden', !isAmblight);
        tvGraphics.src = featureElem.dataset['graphics'];
        if (isAmblight) {
          tvAmblight.src = 'img/borealias_amblight.webp';
        } else {
          tvAmblight.src = '';
        }
      }
    }
  }

  populateHeadline();
  setInterval(function () {
    populateHeadline();
    startIndex = (startIndex + 1) % headlineFeatures.length;
  }, 10000);
</script>
</body>
</html>
